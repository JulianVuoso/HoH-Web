var _0x30cc=['models','deviceLog','toISOString','deviceLogs','all','forEach','message','warning','constraint','routine','name','actions','string','good\x20night','object','c39181d52abe5555','1234','createRoutine','Creates\x20a\x20new\x20routine','Routine','connection','rawConnection','params','body','log','formatters','info','validators','routines','create','then','response','result','catch','errors','handle','finally','updateRoutine','Updates\x20an\x20existing\x20routine','api.validators.routineId','request','retrieveById','routineId','codes','input','meta','update','deleteRoutine','Delete\x20an\x20existing\x20routine','webSocket','delete','retrieveRoutines','retrieveAll','retrieveRooutines','retrieveRoutine','Retrieve\x20a\x20specific\x20routine','executeRoutine','Executes\x20a\x20specific\x20routine','invalid\x20routine\x20id\x20\x27','map','devices','device','deviceTypes','type','find','actionName','invalid\x20action\x20name\x20\x27','\x27\x20for\x20device\x20id\x20\x27','length','invalid\x20number\x20of\x20parameters\x20\x27','\x27\x20for\x20action\x20name\x20\x27','instance','state','getInternalState'];(function(_0x303898,_0x1a633a){var _0x542c15=function(_0x1576d4){while(--_0x1576d4){_0x303898['push'](_0x303898['shift']());}};_0x542c15(++_0x1a633a);}(_0x30cc,0x131));var _0x1d77=function(_0x3e5877,_0x4037aa){_0x3e5877=_0x3e5877-0x0;var _0x58856e=_0x30cc[_0x3e5877];return _0x58856e;};'use strict';const modelSchema={'title':_0x1d77('0x0'),'required':[_0x1d77('0x1'),_0x1d77('0x2')],'schema':{'name':{'type':_0x1d77('0x3'),'example':_0x1d77('0x4')},'actions':{'type':_0x1d77('0x5'),'example':[{'device':{'id':_0x1d77('0x6')},'actionName':'turnOff','params':[],'meta':{}},{'device':{'id':'f597c13717008fb1'},'actionName':'armStay','params':[_0x1d77('0x7')],'meta':{}}]},'meta':{'type':'object','example':{}}}};exports[_0x1d77('0x8')]={'name':_0x1d77('0x8'),'description':_0x1d77('0x9'),'blockedConnectionTypes':['webSocket'],'version':1.5,'modelSchema':modelSchema,'outputExample':{},'tags':[_0x1d77('0xa')],'run':function(_0x34867d,_0xce84df,_0xc97b08){var _0x44a532=_0xce84df[_0x1d77('0xb')][_0x1d77('0xc')][_0x1d77('0xd')][_0x1d77('0xe')];_0x34867d[_0x1d77('0xf')](_0x34867d[_0x1d77('0x10')]['request'](_0x1d77('0x8'),_0x44a532),_0x1d77('0x11'));_0x34867d[_0x1d77('0x12')][_0x1d77('0x0')](_0x44a532)['then'](_0x4a30fd=>{return _0x34867d[_0x1d77('0x13')][_0x1d77('0x14')](_0x4a30fd);})[_0x1d77('0x15')](_0x344201=>{_0xce84df[_0x1d77('0x16')][_0x1d77('0x17')]=_0x344201;_0xc97b08();})[_0x1d77('0x18')](_0x29588c=>{_0xc97b08(_0x34867d[_0x1d77('0x19')][_0x1d77('0x1a')](_0x29588c));})[_0x1d77('0x1b')](()=>{_0x34867d[_0x1d77('0xf')](_0x34867d[_0x1d77('0x10')][_0x1d77('0x16')]('createRoutine',_0xce84df[_0x1d77('0x16')]),'info');});}};exports[_0x1d77('0x1c')]={'name':'updateRoutine','description':_0x1d77('0x1d'),'blockedConnectionTypes':['webSocket'],'version':1.5,'modelSchema':modelSchema,'inputs':{'routineId':{'required':!![],'validator':_0x1d77('0x1e')}},'outputExample':{},'tags':[_0x1d77('0xa')],'run':function(_0x167ef6,_0x36f6b2,_0x5bd403){var _0x5a34a8=_0x36f6b2[_0x1d77('0xb')][_0x1d77('0xc')][_0x1d77('0xd')][_0x1d77('0xe')];_0x167ef6['log'](_0x167ef6['formatters'][_0x1d77('0x1f')](_0x1d77('0x1c'),_0x5a34a8),_0x1d77('0x11'));var _0x33eca7={};_0x167ef6[_0x1d77('0x12')][_0x1d77('0x0')](_0x5a34a8)[_0x1d77('0x15')](_0x427933=>{_0x33eca7[_0x1d77('0x0')]=_0x427933;return _0x167ef6[_0x1d77('0x13')][_0x1d77('0x20')](_0x36f6b2[_0x1d77('0xd')][_0x1d77('0x21')]);})[_0x1d77('0x15')](_0x2b88f2=>{if(!_0x2b88f2)throw{'code':_0x167ef6['errors'][_0x1d77('0x22')][_0x1d77('0x23')],'description':'invalid\x20routine\x20id\x20\x27'+_0x36f6b2[_0x1d77('0xd')][_0x1d77('0x21')]+'\x27'};_0x2b88f2[_0x1d77('0x1')]=_0x33eca7[_0x1d77('0x0')][_0x1d77('0x1')];_0x2b88f2[_0x1d77('0x2')]=_0x33eca7[_0x1d77('0x0')]['actions'];_0x2b88f2[_0x1d77('0x24')]=_0x33eca7[_0x1d77('0x0')][_0x1d77('0x24')];return _0x167ef6[_0x1d77('0x13')][_0x1d77('0x25')](_0x2b88f2);})[_0x1d77('0x15')](_0x53a2cf=>{_0x36f6b2[_0x1d77('0x16')][_0x1d77('0x17')]=_0x53a2cf;_0x5bd403();})[_0x1d77('0x18')](_0x3f2ebb=>{_0x5bd403(_0x167ef6[_0x1d77('0x19')][_0x1d77('0x1a')](_0x3f2ebb));})[_0x1d77('0x1b')](()=>{_0x167ef6[_0x1d77('0xf')](_0x167ef6[_0x1d77('0x10')][_0x1d77('0x16')](_0x1d77('0x1c'),_0x36f6b2[_0x1d77('0x16')]),_0x1d77('0x11'));});}};exports[_0x1d77('0x26')]={'name':_0x1d77('0x26'),'description':_0x1d77('0x27'),'blockedConnectionTypes':[_0x1d77('0x28')],'version':1.5,'modelSchema':null,'inputs':{'routineId':{'routineId':!![],'validator':'api.validators.routineId'}},'outputExample':{},'tags':['Routine'],'run':function(_0x41a625,_0x4a11d3,_0x3d6a3e){_0x41a625[_0x1d77('0x13')][_0x1d77('0x29')](_0x4a11d3[_0x1d77('0xd')][_0x1d77('0x21')])[_0x1d77('0x15')](_0x512523=>{if(!_0x512523)throw{'code':_0x41a625['errors'][_0x1d77('0x22')][_0x1d77('0x23')],'description':'invalid\x20routine\x20id\x20\x27'+_0x4a11d3[_0x1d77('0xd')][_0x1d77('0x21')]+'\x27'};_0x4a11d3['response'][_0x1d77('0x17')]=_0x512523;_0x3d6a3e();})['catch'](_0x67ca6e=>{_0x3d6a3e(_0x41a625[_0x1d77('0x19')][_0x1d77('0x1a')](_0x67ca6e));})[_0x1d77('0x15')](()=>{_0x41a625[_0x1d77('0xf')](_0x41a625[_0x1d77('0x10')][_0x1d77('0x16')](_0x1d77('0x26'),_0x4a11d3[_0x1d77('0x16')]),_0x1d77('0x11'));});}};exports[_0x1d77('0x2a')]={'name':_0x1d77('0x2a'),'description':'Retrieve\x20all\x20routines','blockedConnectionTypes':[_0x1d77('0x28')],'version':1.5,'modelSchema':null,'outputExample':{},'tags':[_0x1d77('0xa')],'run':function(_0x5bef02,_0x35ec93,_0x450280){_0x5bef02[_0x1d77('0x13')][_0x1d77('0x2b')]()[_0x1d77('0x15')](_0x262b9d=>{_0x35ec93['response'][_0x1d77('0x17')]=_0x262b9d;_0x450280();})[_0x1d77('0x18')](_0x5612d9=>{_0x450280(_0x5bef02[_0x1d77('0x19')]['handle'](_0x5612d9));})[_0x1d77('0x15')](()=>{_0x5bef02[_0x1d77('0xf')](_0x5bef02[_0x1d77('0x10')][_0x1d77('0x16')](_0x1d77('0x2c'),_0x35ec93[_0x1d77('0x16')]),_0x1d77('0x11'));});}};exports[_0x1d77('0x2d')]={'name':_0x1d77('0x2d'),'description':_0x1d77('0x2e'),'blockedConnectionTypes':[_0x1d77('0x28')],'version':1.5,'modelSchema':null,'inputs':{'routineId':{'required':!![],'validator':_0x1d77('0x1e')}},'outputExample':{},'tags':[_0x1d77('0xa')],'run':function(_0x36cf7d,_0x2685c4,_0x50d4d6){_0x36cf7d[_0x1d77('0x13')][_0x1d77('0x20')](_0x2685c4['params'][_0x1d77('0x21')])[_0x1d77('0x15')](_0x1354a2=>{if(!_0x1354a2)throw{'code':_0x36cf7d[_0x1d77('0x19')][_0x1d77('0x22')][_0x1d77('0x23')],'description':'invalid\x20routine\x20id\x20\x27'+_0x2685c4[_0x1d77('0xd')][_0x1d77('0x21')]+'\x27'};_0x2685c4[_0x1d77('0x16')][_0x1d77('0x0')]=_0x1354a2;_0x50d4d6();})['catch'](_0x205422=>{_0x50d4d6(_0x36cf7d[_0x1d77('0x19')][_0x1d77('0x1a')](_0x205422));})['then'](()=>{_0x36cf7d[_0x1d77('0xf')](_0x36cf7d[_0x1d77('0x10')]['response'](_0x1d77('0x2d'),_0x2685c4[_0x1d77('0x16')]),_0x1d77('0x11'));});}};exports[_0x1d77('0x2f')]={'name':_0x1d77('0x2f'),'description':_0x1d77('0x30'),'blockedConnectionTypes':[_0x1d77('0x28')],'version':1.5,'modelSchema':null,'inputs':{'routineId':{'required':!![],'validator':_0x1d77('0x1e')}},'outputExample':{},'tags':[_0x1d77('0xa')],'run':function(_0x433884,_0x5b2e2f,_0x327b96){_0x433884[_0x1d77('0x13')][_0x1d77('0x20')](_0x5b2e2f[_0x1d77('0xd')]['routineId'])[_0x1d77('0x15')](_0x54eadc=>{if(!_0x54eadc)throw{'code':_0x433884['errors'][_0x1d77('0x22')][_0x1d77('0x23')],'description':_0x1d77('0x31')+_0x5b2e2f['params'][_0x1d77('0x21')]+'\x27'};let _0xc1edde={};var _0x3510ab=_0x54eadc[_0x1d77('0x2')][_0x1d77('0x32')](_0x36b66b=>{return new Promise((_0xf36787,_0x46bb5e)=>{let _0xac92e4={};_0x433884[_0x1d77('0x33')][_0x1d77('0x20')](_0x36b66b[_0x1d77('0x34')]['id'])[_0x1d77('0x15')](_0x39ba33=>{if(!_0x39ba33)throw{'code':_0x433884[_0x1d77('0x19')][_0x1d77('0x22')][_0x1d77('0x23')],'description':'invalid\x20device\x20id\x20\x27'+_0x36b66b[_0x1d77('0x34')]['id']+'\x27'};_0xac92e4['device']=_0x39ba33;return _0x433884[_0x1d77('0x35')][_0x1d77('0x20')](_0x39ba33[_0x1d77('0x36')]['id']);})[_0x1d77('0x15')](_0x11ab7f=>{var _0x59ae12=_0x11ab7f['actions'][_0x1d77('0x37')](_0x59ae12=>{return _0x59ae12[_0x1d77('0x1')]==_0x36b66b[_0x1d77('0x38')];});if(!_0x59ae12)throw{'code':_0x433884[_0x1d77('0x19')]['codes'][_0x1d77('0x23')],'description':_0x1d77('0x39')+_0x36b66b[_0x1d77('0x38')]+_0x1d77('0x3a')+_0xac92e4[_0x1d77('0x34')]['id']+'\x27'};_0xac92e4[_0x1d77('0x38')]=_0x59ae12[_0x1d77('0x1')];if(_0x59ae12['params'][_0x1d77('0x3b')]!=_0x36b66b[_0x1d77('0xd')][_0x1d77('0x3b')])throw{'code':_0x433884[_0x1d77('0x19')]['codes']['input'],'description':_0x1d77('0x3c')+_0x36b66b[_0x1d77('0xd')][_0x1d77('0x3b')]+_0x1d77('0x3d')+_0x36b66b[_0x1d77('0x38')]+'\x27'};_0xac92e4[_0x1d77('0x3e')]=_0xc1edde[_0xac92e4[_0x1d77('0x34')]['id']];if(!_0xac92e4[_0x1d77('0x3e')]){_0xac92e4[_0x1d77('0x3e')]=new _0x433884[(_0x1d77('0x33'))][_0x11ab7f[(_0x1d77('0x1'))]](_0xac92e4[_0x1d77('0x34')]['id'],_0xac92e4[_0x1d77('0x34')][_0x1d77('0x3f')]);_0xc1edde[_0xac92e4[_0x1d77('0x34')]['id']]=_0xac92e4[_0x1d77('0x3e')];}_0xac92e4['result']=![];switch(_0x36b66b[_0x1d77('0xd')][_0x1d77('0x3b')]){case 0x0:return _0xac92e4[_0x1d77('0x3e')][_0x36b66b[_0x1d77('0x38')]]();case 0x1:return _0xac92e4[_0x1d77('0x3e')][_0x36b66b[_0x1d77('0x38')]](_0x36b66b[_0x1d77('0xd')][0x0]);case 0x2:return _0xac92e4[_0x1d77('0x3e')][_0x36b66b[_0x1d77('0x38')]](_0x36b66b['params'][0x0],_0x36b66b[_0x1d77('0xd')][0x1]);}})[_0x1d77('0x15')](_0x98676e=>{_0xac92e4[_0x1d77('0x17')]=_0x98676e;_0xac92e4[_0x1d77('0x34')][_0x1d77('0x3f')]=_0xac92e4['instance'][_0x1d77('0x40')]();return _0x433884[_0x1d77('0x33')][_0x1d77('0x25')](_0xac92e4[_0x1d77('0x34')]);})[_0x1d77('0x15')](_0x42f4a9=>{var _0x47ef3f=new _0x433884[(_0x1d77('0x41'))][(_0x1d77('0x42'))](new Date()[_0x1d77('0x43')](),_0xac92e4[_0x1d77('0x34')]['id'],_0xac92e4[_0x1d77('0x38')],_0xac92e4[_0x1d77('0xd')],_0xac92e4[_0x1d77('0x17')]);return _0x433884[_0x1d77('0x44')][_0x1d77('0x14')](_0x47ef3f);})[_0x1d77('0x15')](_0x4e4a46=>{_0xf36787(_0xac92e4['result']);})['catch'](_0x3ceb81=>{_0x46bb5e(_0x3ceb81);});});});return Promise[_0x1d77('0x45')](_0x3510ab);})[_0x1d77('0x15')](_0x59f11d=>{var _0x55993a=_0x59f11d['filter'](_0xf732de=>{return _0xf732de instanceof Error;});if(_0x55993a[_0x1d77('0x3b')]>0x0){var _0x54ba52=[];_0x55993a[_0x1d77('0x46')](_0x56b3f6=>{_0x433884[_0x1d77('0xf')](_0x56b3f6[_0x1d77('0x47')],_0x1d77('0x48'));_0x54ba52['push'](_0x56b3f6['message']);});_0x327b96(_0x433884[_0x1d77('0x19')][_0x1d77('0x1a')]({'code':_0x433884[_0x1d77('0x19')][_0x1d77('0x22')][_0x1d77('0x49')],'description':_0x54ba52}));}else{_0x5b2e2f[_0x1d77('0x16')][_0x1d77('0x17')]=_0x59f11d;_0x327b96();}})[_0x1d77('0x18')](_0x289832=>{_0x327b96(_0x433884[_0x1d77('0x19')][_0x1d77('0x1a')](_0x289832));})[_0x1d77('0x15')](()=>{_0x433884[_0x1d77('0xf')](_0x433884['formatters']['response'](_0x1d77('0x2f'),_0x5b2e2f[_0x1d77('0x16')]),_0x1d77('0x11'));});}};