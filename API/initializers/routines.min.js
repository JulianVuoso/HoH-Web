var _0x1ca6=['push','resolve','join','config','general','dbName','log','loading\x20routine\x20database\x20[',']...','debug','ensureIndex','error','routine\x20database\x20loaded','info','nedb','exports','routines','models','routine','toDto','insert','name','fromDto','update','_id','remove','find','map','findOne','reduce','then'];(function(_0x148036,_0x36ff7b){var _0x28c2b1=function(_0x186d7c){while(--_0x186d7c){_0x148036['push'](_0x148036['shift']());}};_0x28c2b1(++_0x36ff7b);}(_0x1ca6,0xc8));var _0x30b7=function(_0x3631c4,_0x47687e){_0x3631c4=_0x3631c4-0x0;var _0x59261c=_0x1ca6[_0x3631c4];return _0x59261c;};'use strict';var Datastore=require(_0x30b7('0x0'));var Path=require('path');module[_0x30b7('0x1')]={'initialize':function(_0x1583e4,_0x2c46c8){_0x1583e4[_0x30b7('0x2')]={'dbName':'routines.db','create':function(_0x20f1d4){return new Promise((_0x5e987f,_0x5e587f)=>{var _0x5b7149=_0x1583e4[_0x30b7('0x3')][_0x30b7('0x4')][_0x30b7('0x5')](_0x20f1d4);_0x1583e4['db'][_0x30b7('0x2')][_0x30b7('0x6')](_0x5b7149,(_0x21ba25,_0x5cf7fe)=>{if(_0x21ba25){_0x21ba25['context']={'entity':{'type':'routine','id':_0x5b7149[_0x30b7('0x7')]}};_0x5e587f(_0x21ba25);}else{_0x5e987f(_0x1583e4[_0x30b7('0x3')]['routine'][_0x30b7('0x8')](_0x5cf7fe));}});});},'update':function(_0x41a553){return new Promise((_0x1566fe,_0xf42ccf)=>{var _0x50a033=_0x1583e4['models'][_0x30b7('0x4')][_0x30b7('0x5')](_0x41a553);_0x1583e4['db'][_0x30b7('0x2')][_0x30b7('0x9')]({'_id':_0x50a033[_0x30b7('0xa')]},_0x50a033,{},(_0x41aa5a,_0x4ce6a1)=>{if(_0x41aa5a){_0x41aa5a['context']={'entity':{'type':_0x30b7('0x4'),'id':_0x50a033[_0x30b7('0x7')]}};_0xf42ccf(_0x41aa5a);}else{_0x1566fe(_0x4ce6a1==0x1);}});});},'delete':function(_0x175f35){return new Promise((_0x3f31d2,_0xf03aa7)=>{_0x1583e4['db'][_0x30b7('0x2')][_0x30b7('0xb')]({'_id':_0x175f35},{},(_0x5f2d1a,_0x40c662)=>{if(_0x5f2d1a){_0xf03aa7(_0x5f2d1a);}else{_0x3f31d2(_0x40c662==0x1);}});});},'retrieveAll':function(){return new Promise((_0x4ba9d1,_0x375483)=>{_0x1583e4['db'][_0x30b7('0x2')][_0x30b7('0xc')]({},(_0xd9ecf1,_0x49f9b2)=>{if(_0xd9ecf1){_0x375483(_0xd9ecf1);}else{var _0x218174=_0x49f9b2[_0x30b7('0xd')](_0x20ec1c=>{return _0x1583e4[_0x30b7('0x3')][_0x30b7('0x4')][_0x30b7('0x8')](_0x20ec1c);});_0x4ba9d1(_0x218174);}});});},'retrieveById':function(_0x5abcf6){return new Promise((_0x5b89da,_0x546064)=>{_0x1583e4['db'][_0x30b7('0x2')][_0x30b7('0xe')]({'_id':_0x5abcf6},(_0x1d52fd,_0x38fe85)=>{if(_0x1d52fd){_0x546064(_0x1d52fd);}else{_0x5b89da(_0x1583e4['models'][_0x30b7('0x4')][_0x30b7('0x8')](_0x38fe85));}});});}};_0x1583e4['utils']['promiseWaterfall']=function(_0xb96848,_0x5e4f41){var _0x65027f=[];return _0xb96848[_0x30b7('0xf')](function(_0x391684,_0x14e232){return _0x391684['then'](function(){return _0x5e4f41(_0x14e232)[_0x30b7('0x10')](function(_0x960785){_0x65027f[_0x30b7('0x11')](_0x960785);return _0x65027f;});});},Promise[_0x30b7('0x12')]());};return _0x2c46c8();},'start':function(_0x16c06b,_0x1713f9){var _0x2628c9=Path[_0x30b7('0x13')](_0x16c06b[_0x30b7('0x14')][_0x30b7('0x15')]['paths']['db'][0x0],_0x16c06b[_0x30b7('0x2')][_0x30b7('0x16')]);_0x16c06b[_0x30b7('0x17')](_0x30b7('0x18')+_0x2628c9+_0x30b7('0x19'),_0x30b7('0x1a'));_0x16c06b['db']=_0x16c06b['db']||{};_0x16c06b['db']['routines']=new Datastore({'filename':_0x2628c9,'autoload':!![]});_0x16c06b['db'][_0x30b7('0x2')][_0x30b7('0x1b')]({'fieldName':'name','unique':!![]},_0x1a286e=>{if(_0x1a286e)_0x16c06b[_0x30b7('0x17')](_0x1a286e,_0x30b7('0x1c'));});_0x16c06b[_0x30b7('0x17')](_0x30b7('0x1d'),_0x30b7('0x1e'));return _0x1713f9();}};